<!DOCTYPE html>
<html lang="en-GB">

<head>
<meta charset="utf-8"/>
<title>Get new character blocks</title>
<meta name="description" content="Generate character sections for block doc."/>

<link rel="stylesheet" href="local.css" type="text/css" />

<script src="../../uniview/descriptions.js"></script> 
<script src="../../uniview/u.js"></script> 
</head>

<body>
<h1>Generate details page stubs</h1>
<p>Produces stubs for codepoint descriptions in XX-details pages.</p>
<p>Input is a space-separated list of characters, generated by UniView. &nbsp;&nbsp; <label><input type="checkbox" id="sort" checked> Sort first?</label></p>

<p><textarea id="listin" placeholder="Add a list of characters here." style="height:400px;width:100%;"></textarea></p>

<p>
<button style="font-size: 150%;" onClick="
document.getElementById('out').value = makeListFromChars(document.getElementById('listin').value); 
document.getElementById('out').select()">Go</button>
</p>

<textarea id="out" style="height:400px;width:100%;"></textarea>



<script>


function makeListFromChars (chars) {
	var charList = chars.split(' ')
    
    if (document.getElementById('sort').checked) charList = charList.sort()
    
	var out = ''
	
    for (var x=0; x<charList.length; x++) {
        if (charList[x] == '') continue
        var items = charList[x].split('\t')
        
        // get code point value, converting escapes if necessary
        if (items[0].includes('&#x')) {
            items[0] = items[0].replace('&#x','').replace(';','')
            i = parseInt(items[0],16)
            }
		else i = items[0].codePointAt(0)
		console.log('i',i, 'items',items)

        var hex = i.toString(16).toUpperCase()
        while (hex.length < 4) hex = '0' + hex
        console.log(hex)

        out += "'\\u{"+hex+"}': `\n"
        out += '<p class="insertTranscription">&#x'+hex+';</p>\n'
        out += '`,\n\n\n\n\n\n'
		}
	return out
	}

</script>

</body>
</html>
